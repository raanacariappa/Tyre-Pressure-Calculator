# Tyre-Pressure-Calculator
""" Fuel Consumption Calculator v1.0 RGB Racing UMA Race Fuel Strategy & Consumption Analysis FEATURES: - Session duration and laptime configuration - Mandatory fuel calculations - Flying lap average consumption - Fuel needed with safety margins (+5%, +10%) - Results in both Litres and Kilograms - Fuel density conversion (0.755 kg/L) - Clean, professional interface Based on RGB Racing UMA fuel consumption procedures """ from PyQt5.QtWidgets import ( QApplication, QMainWindow, QWidget, QVBoxLayout, QHBoxLayout, QLabel, QPushButton, QLineEdit, QTextEdit, QGroupBox, QGridLayout, QDoubleSpinBox, QSpinBox, QTableWidget, QTableWidgetItem, QMessageBox, QSplitter ) from PyQt5.QtCore import Qt from PyQt5.QtGui import QFont, QColor import sys import numpy as np from datetime import datetime class FuelCalculator(QMainWindow): """Main application window for Fuel Consumption Calculator v1.0""" def __init__(self): super().__init__() # Fuel density constant self.FUEL_DENSITY = 0.755 # kg per litre self.init_ui() def init_ui(self): """Initialize the user interface""" self.setWindowTitle('Fuel Consumption Calculator v1.0 - RGB Racing UMA') self.setGeometry(100, 100, 1200, 800) central_widget = QWidget() self.setCentralWidget(central_widget) main_layout = QVBoxLayout() # Title title = QLabel('FUEL CONSUMPTION') title_font = QFont('Arial', 24, QFont.Bold) title.setFont(title_font) title.setAlignment(Qt.AlignCenter) title.setStyleSheet('background-color: black; color: white; padding: 15px;') main_layout.addWidget(title) # Main content area content_layout = QHBoxLayout() # Left side - Inputs inputs_widget = self.create_inputs_section() content_layout.addWidget(inputs_widget, 1) # Right side - Results results_widget = self.create_results_section() content_layout.addWidget(results_widget, 2) main_layout.addLayout(content_layout) self.statusBar().showMessage('Ready - Fuel Consumption Calculator v1.0') central_widget.setLayout(main_layout) def create_inputs_section(self): """Create the inputs section""" widget = QWidget() layout = QVBoxLayout() # Session Parameters session_group = QGroupBox('Inputs') session_layout = QGridLayout() # Session Duration session_layout.addWidget(QLabel('Session Duration'), 0, 0) self.session_duration = QSpinBox() self.session_duration.setRange(1, 300) self.session_duration.setValue(50) self.session_duration.setSuffix(' min') session_layout.addWidget(self.session_duration, 0, 1) # Average Laptime session_layout.addWidget(QLabel('Average Laptime'), 1, 0) self.avg_laptime = QDoubleSpinBox() self.avg_laptime.setRange(30.0, 300.0) self.avg_laptime.setValue(117.0) self.avg_laptime.setSingleStep(0.1) self.avg_laptime.setDecimals(1) self.avg_laptime.setSuffix(' s') session_layout.addWidget(self.avg_laptime, 1, 1) # Added Laps (OUT/IN) session_layout.addWidget(QLabel('Added Laps (OUT/IN)'), 2, 0) self.added_laps = QSpinBox() self.added_laps.setRange(0, 20) self.added_laps.setValue(4) session_layout.addWidget(self.added_laps, 2, 1) # Mandatory Fuel session_layout.addWidget(QLabel('Mandatory Fuel (kg)'), 3, 0) self.mandatory_fuel = QDoubleSpinBox() self.mandatory_fuel.setRange(0.0, 50.0) self.mandatory_fuel.setValue(3.0) self.mandatory_fuel.setSingleStep(0.1) self.mandatory_fuel.setDecimals(1) self.mandatory_fuel.setSuffix(' kg') session_layout.addWidget(self.mandatory_fuel, 3, 1) # Warm Up session_layout.addWidget(QLabel('Warm Up (kg)'), 4, 0) self.warm_up = QDoubleSpinBox() self.warm_up.setRange(0.0, 10.0) self.warm_up.setValue(1.0) self.warm_up.setSingleStep(0.1) self.warm_up.setDecimals(1) self.warm_up.setSuffix(' kg') session_layout.addWidget(self.warm_up, 4, 1) # Margin session_layout.addWidget(QLabel('Red/Yellow Flag Reserve (kg)'), 5, 0) self.red_yellow_reserve = QDoubleSpinBox() self.red_yellow_reserve.setRange(0.0, 20.0) self.red_yellow_reserve.setValue(5.0) self.red_yellow_reserve.setSingleStep(0.5) self.red_yellow_reserve.setDecimals(1) self.red_yellow_reserve.setSuffix(' kg') session_layout.addWidget(self.red_yellow_reserve, 5, 1) session_group.setLayout(session_layout) layout.addWidget(session_group) # Consumption Data consumption_group = QGroupBox('RESULTS >') consumption_layout = QGridLayout() # Laps consumption_layout.addWidget(QLabel('Laps'), 0, 0) self.laps_input = QSpinBox() self.laps_input.setRange(1, 500) self.laps_input.setValue(26) consumption_layout.addWidget(self.laps_input, 0, 1) # Fuel consumed consumption_layout.addWidget(QLabel('Fuel cons (L)'), 1, 0) self.fuel_cons_input = QDoubleSpinBox() self.fuel_cons_input.setRange(0.0, 500.0) self.fuel_cons_input.setValue(52.82) self.fuel_cons_input.setSingleStep(0.01) self.fuel_cons_input.setDecimals(2) self.fuel_cons_input.setSuffix(' L') consumption_layout.addWidget(self.fuel_cons_input, 1, 1) consumption_group.setLayout(consumption_layout) layout.addWidget(consumption_group) # Calculate Button calc_btn = QPushButton('CALCULATE FUEL NEEDED') calc_btn.clicked.connect(self.calculate_fuel) calc_btn.setStyleSheet( 'QPushButton { background-color: #FF9800; color: white; ' 'padding: 15px; font-size: 16px; font-weight: bold; ' 'margin-top: 20px; }' 'QPushButton:hover { background-color: #e68900; }' ) layout.addWidget(calc_btn) layout.addStretch() widget.setLayout(layout) return widget def create_results_section(self): """Create the results section""" widget = QWidget() layout = QVBoxLayout() # Results Display results_group = QGroupBox('Fuel Consumption Analysis') results_layout = QVBoxLayout() self.results_text = QTextEdit() self.results_text.setReadOnly(True) self.results_text.setStyleSheet( 'QTextEdit { font-family: Consolas, monospace; font-size: 11px; ' 'background-color: white; }' ) self.results_text.setMinimumHeight(400) results_layout.addWidget(self.results_text) results_group.setLayout(results_layout) layout.addWidget(results_group) # Conversion Table conversion_group = QGroupBox('Fuel Density Conversion') conversion_layout = QVBoxLayout() self.conversion_table = QTableWidget() self.conversion_table.setRowCount(2) self.conversion_table.setColumnCount(3) self.conversion_table.setHorizontalHeaderLabels(['', 'L', 'KG']) self.conversion_table.setVerticalHeaderLabels(['LITER TO KG', 'KG TO LITER']) # Set default values self.conversion_table.setItem(0, 0, QTableWidgetItem('LITER TO KG')) self.conversion_table.setItem(0, 1, QTableWidgetItem('4')) self.conversion_table.setItem(0, 2, QTableWidgetItem(f'{4 * self.FUEL_DENSITY:.2f}')) self.conversion_table.setItem(1, 0, QTableWidgetItem('KG TO LITER')) self.conversion_table.setItem(1, 1, QTableWidgetItem('1')) self.conversion_table.setItem(1, 2, QTableWidgetItem(f'{1 / self.FUEL_DENSITY:.8f}')) self.conversion_table.setMaximumHeight(150) conversion_layout.addWidget(self.conversion_table) # Fuel density label density_label = QLabel(f'FUEL 1L = {self.FUEL_DENSITY} Kg') density_label.setAlignment(Qt.AlignCenter) density_label.setStyleSheet('font-weight: bold; padding: 10px; background-color: #f0f0f0;') conversion_layout.addWidget(density_label) conversion_group.setLayout(conversion_layout) layout.addWidget(conversion_group) widget.setLayout(layout) return widget def calculate_fuel(self): """Calculate fuel needed for the session""" try: # Get inputs session_duration = self.session_duration.value() # minutes avg_laptime = self.avg_laptime.value() # seconds added_laps = self.added_laps.value() mandatory_fuel_kg = self.mandatory_fuel.value() # kg warm_up_kg = self.warm_up.value() # kg margin_kg = self.margin.value() # kg # Get consumption data laps_completed = self.laps_input.value() fuel_consumed_L = self.fuel_cons_input.value() # litres # Calculate consumption per lap lap_avg_L = fuel_consumed_L / laps_completed # litres per lap lap_avg_kg = lap_avg_L * self.FUEL_DENSITY # kg per lap # Calculate possible laps in session session_duration_sec = session_duration * 60 possible_laps = int(session_duration_sec / avg_laptime) # Calculate added laps consumption added_laps_consumption = added_laps * lap_avg_kg # Calculate total laps including added total_laps = possible_laps + added_laps # Calculate mandatory fuel components mandatory_total_kg = mandatory_fuel_kg + warm_up_kg + margin_kg # Calculate fuel needed for flying laps # OUT/IN laps use 85% of normal consumption out_in_factor = 0.85 out_in_consumption_L = (lap_avg_L * out_in_factor) * 2 # 2 laps (out + in) out_in_consumption_kg = out_in_consumption_L * self.FUEL_DENSITY # Calculate flying lap average flying_laps = laps_completed - 2 # Exclude out and in laps if flying_laps > 0: flying_lap_avg_L = (fuel_consumed_L - out_in_consumption_L) / flying_laps flying_lap_avg_kg = flying_lap_avg_L * self.FUEL_DENSITY else: flying_lap_avg_L = lap_avg_L flying_lap_avg_kg = lap_avg_kg # Calculate average consumption per lap for session avg_cons_kg = (total_laps * flying_lap_avg_kg) / total_laps if total_laps > 0 else 0 avg_cons_L = avg_cons_kg / self.FUEL_DENSITY # Calculate fuel needed for the session # Base fuel = flying laps * flying lap average flying_laps_session = possible_laps base_fuel_kg = flying_laps_session * flying_lap_avg_kg # Total fuel needed fuel_needed_base_kg = base_fuel_kg + mandatory_total_kg fuel_needed_base_L = fuel_needed_base_kg / self.FUEL_DENSITY # Fuel needed with margins fuel_needed_5_kg = fuel_needed_base_kg * 1.05 fuel_needed_5_L = fuel_needed_5_kg / self.FUEL_DENSITY fuel_needed_10_kg = fuel_needed_base_kg * 1.10 fuel_needed_10_L = fuel_needed_10_kg / self.FUEL_DENSITY # Generate results display results = f""" ╔══════════════════════════════════════════════════════════════════╗ ║ FUEL CONSUMPTION CALCULATION RESULTS ║ ╚══════════════════════════════════════════════════════════════════╝ SESSION PARAMETERS: Session Duration: {session_duration} minutes Average Laptime: {avg_laptime:.1f} seconds Added Laps (OUT/IN): {added_laps} Possible Laps: {possible_laps} ═══════════════════════════════════════════════════════════════════ FLYING LAP DATA (RACE PACE CONSUMPTION): Odometer Before: {odo_before:.1f} km Odometer After: {odo_after:.1f} km Distance Covered: {distance_covered:.1f} km Fuel Before: {fuel_before:.1f} L Fuel After: {fuel_after:.1f} L Fuel Consumed: {fuel_consumed_L:.2f} L Laps Completed: {laps_completed} Flying Lap Avg: {flying_lap_avg_L:.2f} L/lap = {flying_lap_avg_kg:.2f} kg/lap (Race Pace Consumption) ═══════════════════════════════════════════════════════════════════ OUTLAP/INLAP CONSUMPTION (70% of Flying Lap): Outlap/Inlap Avg: {out_in_lap_L:.2f} L/lap = {out_in_lap_kg:.2f} kg/lap (70% of race pace) ═══════════════════════════════════════════════════════════════════ NON-RACE PACE FUEL (Outlap/Inlap + Reserves): Mandatory Fuel: {mandatory_fuel_kg:.1f} kg Warm Up: {warm_up_kg:.1f} kg Red/Yellow Reserve: {red_yellow_kg:.1f} kg ───────────────────────────────────────── Total Non-Race: {non_race_pace_kg:.2f} kg ({non_race_pace_kg/self.FUEL_DENSITY:.2f} L) (Includes outlap/inlap reserves) ═══════════════════════════════════════════════════════════════════ FUEL NEEDED FOR {possible_laps} LAPS SESSION: Race Pace Fuel: {race_pace_fuel_kg:.2f} kg ({race_pace_fuel_kg/self.FUEL_DENSITY:.2f} L) ({possible_laps} laps × {flying_lap_avg_kg:.2f} kg/lap) + Outlap/Inlap: {outlap_inlap_fuel_kg:.2f} kg ({outlap_inlap_fuel_kg/self.FUEL_DENSITY:.2f} L) (2 laps × {out_in_lap_kg:.2f} kg/lap) + Non-Race Reserves: {non_race_pace_kg:.2f} kg ({non_race_pace_kg/self.FUEL_DENSITY:.2f} L) ─────────────────────────────────────────────────────────── Total Base: {fuel_needed_base_kg:.2f} kg ({fuel_needed_base_L:.2f} L) With Safety Margins: Base + 5%: {fuel_needed_5_kg:.2f} kg ({fuel_needed_5_L:.2f} L) Base + 10%: {fuel_needed_10_kg:.2f} kg ({fuel_needed_10_L:.2f} L) ═══════════════════════════════════════════════════════════════════ RECOMMENDED FUEL TO ADD: → Standard: {fuel_needed_base_L:.2f} L ({fuel_needed_base_kg:.2f} kg) → Conservative: {fuel_needed_5_L:.2f} L ({fuel_needed_5_kg:.2f} kg) [+5%] → Safe: {fuel_needed_10_L:.2f} L ({fuel_needed_10_kg:.2f} kg) [+10%] ═══════════════════════════════════════════════════════════════════ Fuel Density: 1 Litre = {self.FUEL_DENSITY:.3f} kg Calculation Date: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')} """ self.results_text.setText(results) self.statusBar().showMessage(f'Calculation complete - Fuel needed: {fuel_needed_base_L:.2f} L ({fuel_needed_base_kg:.2f} kg)') except Exception as e: QMessageBox.critical(self, 'Calculation Error', f'Error calculating fuel: {str(e)}') def main(): """Main application entry point""" app = QApplication(sys.argv) app.setStyle('Fusion') window = FuelCalculator() window.show() sys.exit(app.exec_()) if __name__ == '__main__': main()
